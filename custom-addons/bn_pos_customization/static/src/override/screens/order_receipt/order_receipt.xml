<?xml version="1.0" encoding="utf-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="bn_pos_customization.OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('pos-receipt')]" position="replace">
            <div class="pos-receipt">
                <t t-set="company" t-value="props.data.headerData.company"/>
                <t t-set="order" t-value="props.data"/>
                <t t-set="partner" t-value="props.data.partner"/>
                <t t-set="lines" t-value="props.data.orderlines"/>
                <t t-set="date_format" t-value="order.date" />
                <t t-set="format_currency_amount_zero" t-value="props.formatCurrency(0)" />
                <t t-set="format_currency_amount" t-value="props.formatCurrency(order.amount_total)" />

                <div class="row" style="margin-top: 212px;">
                    <div class="col-4">
                        <h1 class="fs-3 fw-bold text-uppercase">Donation Receipt</h1>
                    </div>
                    <div class="col-8 text-end">
                        <h1 class="fs-3 fw-bold text-uppercase">
                            <t t-if="company.name"><t t-esc="company.name"/></t>
                            <t t-if="company.city">(<t t-esc="company.city"/>)</t>
                        </h1>
                    </div>
                </div>

                <!-- Donor & Receipt Info -->
                <div class="row border border-2 p-3">
                    <div class="col-6">
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">DN #:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-set="city_code" t-value="company.city and company.city.substring(0,3).toUpperCase() or 'UNK'"/>
                                    <t t-set="branch_code" t-value="company.name.substring(0,3).toUpperCase() or 'UNK'"/>
                                    <t t-set="current_year" t-value="new Date().getFullYear()"/>
                                    <t t-set="random_no" t-value="order.name and order.name.slice(-4) or '0000'"/>
                                    <t t-esc="city_code"/>-<t t-esc="branch_code"/>-<t t-esc="current_year"/>-<t t-esc="random_no"/>
                                </h4>
                            </div>
                        </div>
                        
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Donor Name:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="partner.name">
                                        <t t-esc="partner.name"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4"><h4 class="fs-5 fw-medium">Cash Amount:</h4></div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="!order.comment_feedback">
                                        <t t-if="order.amount_total">
                                            <t t-esc="format_currency_amount"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="format_currency_amount_zero"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="format_currency_amount_zero"/>
                                    </t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Printed By:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.cashier">
                                        <t t-esc="order.cashier"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>
                      
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Cheque Amount:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.comment_feedback">
                                        <t t-esc="format_currency_amount"/>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="format_currency_amount_zero"/>
                                    </t>
                                </h4>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Receipt Date:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.date">
                                        <t t-esc="date_format"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>
                        
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Cell #:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="partner.mobile">
                                        <t t-esc="partner.mobile"/>
                                    </t>
                                    <t t-else="">
                                        <t t-if="partner.phone">
                                            <t t-esc="partner.phone"/>
                                        </t>
                                        <t t-else="">-</t>
                                    </t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Receipt By:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.cashier">
                                        <t t-esc="order.cashier"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Printed Date:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.date">
                                        <t t-esc="date_format"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Total Amount:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.amount_total">
                                        <t t-esc="format_currency_amount"/>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="format_currency_amount_zero"/>
                                    </t>
                                </h4>
                            </div>
                        </div>
                    </div>
                </div>

                <br/>

                <!-- Items Table -->
                <table class="table table-bordered text-center">
                    <thead>
                        <tr>
                            <th>Account Title</th>
                            <th>Quantity</th>
                            <th>Rate</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="lines" t-as="line" t-key="line.productName">
                            <tr>
                                <td class="text-start">
                                    <t t-if="line.productName">
                                        <t t-esc="line.productName"/>
                                    </t>
                                    <t t-else="">-</t>
                                </td>
                                <td class="text-end">
                                    <t t-if="line.qty">
                                        <t t-esc="line.qty"/>
                                    </t>
                                    <t t-else="">-</t>
                                </td>
                                <td class="text-end">
                                    <t t-if="line.unitPrice">
                                        <t t-esc="line.unitPrice"/>
                                    </t>
                                    <t t-else="">-</t>
                                </td>
                                <td class="text-end">
                                    <t t-if="line.price">
                                        <t t-esc="line.price"/>
                                    </t>
                                    <t t-else="">-</t>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>

                <!-- Amount in words & Footer -->
                <table class="table table-bordered">
                    <tfoot>
                        <tr>
                            <th class="text-start">Enter By</th>
                            <td class="text-start">
                                <t t-if="order.cashier">
                                    <t t-esc="order.cashier"/>
                                </t>
                                <t t-else="">-</t>
                            </td>
                            <th class="text-start">Total Amount</th>
                            <td class="text-end">
                                <t t-if="order.amount_total">
                                    <t t-esc="format_currency_amount"/>
                                </t>
                                <t t-else="">
                                    <t t-esc="format_currency_amount_zero"/>
                                </t>
                            </td>
                        </tr>
                    </tfoot>
                </table>

                <hr class="border-top border-2 border-dark my-3"/>

                <!-- Donor & Receipt Info -->
                <div class="row border border-2 p-3">
                    <div class="col-6">
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">DN #:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-set="city_code" t-value="company.city and company.city.substring(0,3).toUpperCase() or 'UNK'"/>
                                    <t t-set="branch_code" t-value="company.name.substring(0,3).toUpperCase() or 'UNK'"/>
                                    <t t-set="current_year" t-value="new Date().getFullYear()"/>
                                    <t t-set="random_no" t-value="order.name and order.name.slice(-4) or '0000'"/>
                                    <t t-esc="city_code"/>-<t t-esc="branch_code"/>-<t t-esc="current_year"/>-<t t-esc="random_no"/>
                                </h4>
                            </div>
                        </div>
                        
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Donor Name:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="partner.name">
                                        <t t-esc="partner.name"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4"><h4 class="fs-5 fw-medium">Cash Amount:</h4></div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="!order.comment_feedback">
                                        <t t-if="order.amount_total">
                                            <t t-esc="format_currency_amount"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="format_currency_amount_zero"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="format_currency_amount_zero"/>
                                    </t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Printed By:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.cashier">
                                        <t t-esc="order.cashier"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>
                      
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Cheque Amount:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.comment_feedback">
                                        <t t-esc="format_currency_amount"/>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="format_currency_amount_zero"/>
                                    </t>
                                </h4>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Receipt Date:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.date">
                                        <t t-esc="date_format"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>
                        
                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Cell #:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="partner.mobile">
                                        <t t-esc="partner.mobile"/>
                                    </t>
                                    <t t-else="">
                                        <t t-if="partner.phone">
                                            <t t-esc="partner.phone"/>
                                        </t>
                                        <t t-else="">-</t>
                                    </t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Receipt By:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.cashier">
                                        <t t-esc="order.cashier"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Printed Date:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.date">
                                        <t t-esc="date_format"/>
                                    </t>
                                    <t t-else="">-</t>
                                </h4>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-4">
                                <h4 class="fs-5 fw-medium">Total Amount:</h4>
                            </div>
                            <div class="col-8">
                                <h4 class="fs-5 fw-medium">
                                    <t t-if="order.amount_total">
                                        <t t-esc="format_currency_amount"/>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="format_currency_amount_zero"/>
                                    </t>
                                </h4>
                            </div>
                        </div>
                    </div>
                </div>

                <br/>
                <div class="pos-receipt-order-data">
                    <p>Powered by BytesNode</p>
                    <p>Mobile No. --- 03170295857 | Email --- syedowaisnoor.devex@gmail.com or info@bytesnode.com | Webiste --- bytesnode.com</p>
                </div>
            </div>
        </xpath>
    </t>

</templates>