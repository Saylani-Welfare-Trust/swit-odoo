<?xml version="1.0" encoding="UTF-8"?>

<templates id="pos_microfinance_loan_microfinance_button" xml:space="preserve">
    <t t-name="pos_microfinance_loan.MicrofinanceButton">
        <button class="control-button btn btn-light rounded-0 fw-bolder" t-on-click="() => this.onClick()">
            <i class="fa fa-pencil-square" role="img" aria-label="MicrofinanceInstallment" title="MicrofinanceInstallment"/>
            <span> Microfinance Installment </span>
        </button>
    </t>

    <t t-name="pos_microfinance_loan.InstallmentPopup">
        <div class="popup">
            <div class="modal-header">
                <h2><t t-esc="this.title"/></h2>
            </div>
            <table class="table table-striped table-hover table-bordered">
                <thead class="table-dark">
                <tr>
<!--                    <th scope="col">ID</th>-->
                    <th scope="col">Loan ID</th>
                    <th scope="col">Customer</th>
                    <th scope="col">Asset Type</th>
                    <th scope="col">Product</th>
                    <th scope="col"></th>
                </tr>
                </thead>
                <tbody>
                 <t t-foreach="this.loan_ids" t-as="loan_id" t-key="loan_id.id">
                     <tr>
                         <td><t t-esc="loan_id.name"/></td>
                         <td><t t-esc="loan_id.customer_name"/></td>
                         <td><t t-esc="loan_id.asset_type"/></td>
                         <t t-if="loan_id.product != false">
                            <td><t t-esc="loan_id.product"/></td>
                         </t>
                         <t t-else="">
                            <td></td>
                         </t>
<!--                         <td t-att-class="{'text-danger' :  this.state == 'unpaid' , 'text-success' : this.state == 'paid' }">-->
<!--                            <t t-esc="this.props.state"/>-->
<!--                         </td>-->
                         <td>
<!--                               <t t-if="this.state != 'paid'">-->
                             <button class="btn btn-success me-2 btn_edit" t-on-click="() => this.onClick(loan_id)">Pay</button>
<!--                               </t>-->
                         </td>
                    </tr>
               </t>

            </tbody>
<!--                <tfoot>-->
<!--                        <tr>-->
<!--                        <th scope="col"></th>-->
<!--                            <th scope="col"><t t-esc="this.props.partner.name"/></th>-->
<!--                            <th scope="col"><t t-esc="this.props.partner.date"/></th>-->
<!--                            <th scope="col"><t t-esc="this.props.partner.total"/></th>-->
<!--                            <th scope="col"></th>-->
<!--                        </tr>-->
<!--                    </tfoot>-->
        </table>
            <footer class="footer modal-footer">
                <button type="button" class="btn btn-primary" t-on-click="confirm">Ok</button>
            </footer>
        </div>
    </t>

    <t t-name="pos_microfinance_loan.InputPopup">
        <div class="popup">
            <div class="modal-header">
                <h2><t t-esc="this.title"/></h2>
            </div>
            <div style="margin: 30px 15px;">
                <div style="text-align:left;">
                    <span style="width:120px; display:inline-block;">Loan Id:</span>
                    <span class="fw-bold" t-esc="this.loan_id.name"/>
                </div>
                 <div style="text-align:left; display:flex;">
                    <span style="width:120px; display:inline-block;">Payment Type:</span>
                    <select style="width:auto;" t-att-value="this.doc_type.doc_type" t-on-change="onDocTypeChange">
                        <option value="sec_dep">Security Deposit</option>
                        <option value="ins_dep">Installment Deposit</option>
                    </select>
                </div>
                <div style="text-align:left; display:flex;">
                    <span style="width:120px; display:inline-block;">Payment Method:</span>
                    <select style="width:auto;" t-on-change="onPaymentMethodChange">
                        <option value="cash">Cash</option>
                        <option value="cheque">Cheque</option>
                    </select>
                </div>
                <t t-if="this.payment.payment_type === 'cheque'">
                    <div style="text-align:left; display:flex;">
                        <span style="width:120px; display:inline-block;">Bank Name:</span>
                        <span >
                             <select style="width:auto;" t-on-change="onBankChange">
                                 <t t-foreach="this.bank_ids" t-as="bank_id" t-key="bank_id.id">
                                    <option t-att-value="bank_id.id"><t t-esc="bank_id.name"/></option>
                                 </t>
                             </select>
                        </span>
                    </div>
                    <div style="text-align:left; display:flex;">
                        <span style="width:120px; display:inline-block;">Cheque Number:</span>
                        <span >
                            <input type="text" id="cheque_number" name="cheque_number" required="True" t-on-change="onChequeNumberChange"/>
                         </span>
                    </div>
                    <div style="text-align:left; display:flex;">
                        <span style="width:120px; display:inline-block;">Cheque Date:</span>
                        <span>
                            <input type="date" id="cheque_date" name="cheque_date" required="True" t-att-value="this.cheque_date.date" t-on-change="onChequeDateChange"/>
                         </span>
                    </div>
                </t>
                <div style="text-align:left; display:flex;">
                        <span style="width:120px; display:inline-block;">Amount: (<t class="fw-bold" t-esc="this.loan_id.currency_symbol"/>)</span>
                        <span>
                            <input type="text" id="amount" name="amount" required="True" t-on-change="onAmountChange"/>
                        </span>
                </div>
            </div>
            <footer class="footer modal-footer">
                <button type="button" class="btn btn-primary" t-on-click="confirmPayment">Confirm</button>
                <button type="button" class="btn btn-secondary" t-on-click="cancel">Cancel</button>
            </footer>
        </div>
    </t>

</templates>