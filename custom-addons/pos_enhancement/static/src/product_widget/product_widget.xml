<?xml version="1.0" encoding="UTF-8" ?>
<templates id="template" xml:space="preserve">

    <t t-name="pos_enhancement.ProductsWidget">
        <xpath expr="//div[hasclass('products-widget')]" position="replace">
            <div class="products-widget d-flex flex-column flex-grow-1 overflow-auto" t-ref="products-widget">
                <t t-set="showCategoryImages" t-value="getShowCategoryImages()" />
                <div class="products-widget-control d-flex bg-view shadow-sm justify-content-between" style="flex-direction: column;" t-att-class="{ 'h-12': showCategoryImages }">
                    <CategorySelector
                        categories="getCategories()"
                        onClick="(id) => this.pos.setSelectedCategoryId(id)"
                        showImage="showCategoryImages"
                        class="ui.isSmall ? 'scrollbar-hidden' : ''"
                    />
                    <!-- <div t-if="is_donee" style="display:flex;"> -->
                    <div t-if="is_donee" style="width: 40%;">
                        <div>
                            <div style="display: flex; padding:8px">
                                <label style="text-wrap: nowrap; padding: 4px;" for="state">Order Type:</label>
                                <select t-on-click="(ev)=>this.setOrderType(ev)" class="detail form-select bg-white" name="order_type">
                                    <option value=""> </option>
                                        <option value="one_time"  t-att-selected="currentOrder.order_type == 'one_time'">
                                            One Time
                                        </option>
                                        <option  value="recurring" t-att-selected="currentOrder.order_type == 'recurring'"> 
                                            Recurring
                                        </option>
                                </select>
                            </div>

                            <div style="display: flex; padding:8px">
                                <label style="text-wrap: nowrap; padding: 4px;"  for="state">Disbursement Type</label>
                                <select t-on-click="(ev)=>this.setdisbursementType(ev)" class="detail form-select bg-white" id="disbursement_type" name="disbursement_type">
                                    <option value=""> </option>
                                        <option value="in_kind" t-att-selected="currentOrder.disbursement_type == 'in_kind'">
                                            In Kind Support
                                        </option>
                                        <option  value="cash" t-att-selected="currentOrder.disbursement_type == 'cash'"> 
                                            Cash Support
                                        </option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <div style="display: flex; padding:8px">
                                <t t-if="currentOrder.disbursement_type == 'in_kind'">
                                <label style="text-wrap: nowrap; padding: 4px;" for="state">Transaction Type</label>
                                <select t-on-click="(ev)=>this.setInKindTransactionType(ev)" class="detail form-select bg-white" id="transaction_type" name="in_kind_transaction_type"  >
                                    <option value=""> </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'ration'" value="ration">
                                            Ration Support
                                        </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'ramzan'" value="ramzan">
                                            Ramzan Support
                                        </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'meal'" value="meal">
                                            Meal Distribution
                                        </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'medicines'" value="medicines">
                                            Medicines - General
                                        </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'medicines_cancer'" value="medicines_cancer">
                                            Medicines - Cancer Support
                                        </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'assisted_devices'" value="assisted_devices">
                                            Artificial Limbs &amp; Assisted Devices
                                        </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'madaris'" value="madaris">
                                            Madaris Support
                                        </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'masjid'" value="masjid">
                                            Masajid Support
                                        </option>
                                        <option t-att-selected="currentOrder.in_kind_transaction_type == 'wedding'" value="wedding">
                                            Wedding Support Program
                                        </option>

                                </select>
                                </t>
                                <t t-if="currentOrder.disbursement_type == 'cash'">
                                <label style="text-wrap: nowrap; padding: 4px;"  for="state">Transaction Type</label>
                                <select t-on-click="(ev)=>this.setCashTransactionType(ev)" class="detail form-select bg-white" id="cash_transaction_type" name="cash_transaction_type" >
                                    <option value=""> </option>
                                        <option t-att-selected="currentOrder.cash_transaction_type == 'scholarship'" value="scholarship">
                                            Scholarship
                                        </option>
                                        <option t-att-selected="currentOrder.cash_transaction_type == 'kifalat'" value="kifalat">
                                            Kifalat Program
                                        </option>
                                        <option t-att-selected="currentOrder.cash_transaction_type == 'rozgar'" value="rozgar">
                                            Rozgar Schemes
                                        </option>
                                </select>
                                </t>
                            </div>
                        </div>

                    </div>
                    <!-- <div t-if="!is_donee" style="display:flex;">
                        <button t-on-click="open_fee_vouchers" class="pay validation pay-order-button btn-primary button btn d-flex flex-column flex-fill align-items-center justify-content-center fw-bolder btn-lg rounded-0">Fee Vouchers</button>
                    </div> -->
                    <Input tModel="[pos, 'searchProductWord']"
                        class="'p-2'"
                        isSmall="ui.isSmall"
                        placeholder="'Search products...'"
                        icon="{type: 'fa', value: 'fa-search'}"
                        debounceMillis="100" />
                </div>
                <div class="product-list-container flex-grow-1 overflow-y-auto"  t-att-style="productsToDisplay.length == 0 ? 'background-image: url(\'/sm_point_of_sale_apps/static/src/images/logn_ew.jpg\');background-size: cover;background-repeat: no-repeat;display: flex;flex-direction: row;flex-wrap: nowrap;justify-content: center;align-items: center; height: 85vh;' : ''">
                    <div t-if="productsToDisplay.length != 0 and pos.posHasValidProduct()" t-attf-class="product-list {{this.pos.productListViewMode}} p-1">
                        <t t-foreach="productsToDisplay" t-as="product" t-key="product.id">
                            <ProductCard
                                class="pos.productViewMode"
                                name="product.display_name"
                                productId="product.id"
                                price="product.getFormattedUnitPrice()"
                                imageUrl="pos.show_product_images and product.getImageUrl()"
                                onClick="() =>this.pos.addProductToCurrentOrder(product)"
                                productInfo="true"
                                onProductInfoClick="() => this.onProductInfoClick(product)"
                            />
                        </t>
                    </div>
                    <div t-else="" class="product-list-empty no-results-message text-center mt-5">
                        <t t-if="searchWord">
                            <div>
                                <p style="color: #060606;">No products found for <b>"<t t-esc="searchWord"/>"</b> in this category.</p>
                            </div>
                        </t>
                        <t t-else="">
                            <t t-if="pos.posHasValidProduct()">
                                <div>
                                    <p style="color: #060606;">There are no products in this category.</p>
                                </div>
                            </t>
                            <t t-else="">
                                <div t-if="!state.loadingDemo">
                                    <div>
                                        <p  style="color: #060606;" class="text-large">No products available. Explore <a role="button" class="button-no-demo fw-bolder" t-on-click="loadDemoDataProducts">demo data</a> or <a role="button" class="button-no-demo fw-bolder" t-on-click="createNewProducts">create your own</a>.</p>
                                    </div>
                                </div>
                                <div t-else="" class="block-top-header position-absolute top-0 start-0 bg-black opacity-50 w-100 h-100 z-1000">
                                    <div class="d-flex h-100 w-100 text-white flex-row align-items-center justify-content-center">
                                        <div class="o_spinner d-flex flex-column mb-4">
                                            <div>
                                                <img src="/web/static/img/spin.svg" alt="Loading..."/>
                                                Loading...
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </t>
                    </div>
                    <div t-if="searchWord" class="search-more-button d-flex justify-content-center">
                        <button class="btn btn-primary btn-lg" t-on-click="onPressEnterKey">Search more</button>
                    </div>
                    <div class="portal search-database-button no-results-message" t-att-class="{ 'd-none':  !shouldShowButton }"></div>
                </div>
            </div>
        </xpath>
    </t>
</templates>