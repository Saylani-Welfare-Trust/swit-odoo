<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Donee -->
    <record id="custom_donee_res_partner_view_tree" model="ir.ui.view">
        <field name="name">custom.res.partner.view.tree</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <tree>
                <field name="barcode" string="Registration ID" />
                <field name="complete_name" />
                <field name="gender" />
                <field name="martial_status" />
                <field name="street" string="Address" />
                <field name="mobile" widget="phone" />
                <field name="cnic_no" />
                <field name="date_of_birth" />
                <field name="age" />
                <field name="city" />
                <field name="branch_id" string="Branch" />
                <field name="donor_id" column_invisible="1" />
                <field name="donor_registration_id" />
                <field name="old_system_record" string="Old System ID" />
                <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-warning="state == 'validate'" decoration-success="state == 'register'" decoration-danger="state == 'reject'" />
            </tree>
        </field>
    </record>

    <record id="custom_donee_res_partner_view_form" model="ir.ui.view">
        <field name="name">custom.donee.res.partner.view.form</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <!-- <button string="Reset to Draft" name="action_draft" type="object" invisible="state in ['draft', 'validate', 'print_info', 'change_request']" /> -->
                    <button string="Validate Data" name="action_validate" type="object" class="oe_highlight" invisible="state in ['validate', 'print_info', 'register', 'reject', 'change_request']" />
                    <button string="Print Info" name="action_print_info" type="object" class="oe_highlight" invisible="state in ['draft', 'register', 'print_info', 'reject']" />
                    <button string="Register" name="action_register" type="object" class="oe_highlight" invisible="state in ['draft', 'validate', 'register', 'reject', 'change_request']" />
                    <button string="Change Request" name="action_change_request" type="object" invisible="state in ['draft', 'validate', 'print_info', 'reject', 'change_request']" />
                    
                    <button string="Generate MicroFinance Application" name="action_microfinance_application" type="object" class="oe_highlight" />
                    <!-- <button string="Generate Welfare Application" name="action_welfare_application" type="object" class="oe_highlight" /> -->

                    <field name="state" widget="statusbar" statusbar_visible="draft, validate, print_info, register"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box"/>
                    <widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>
                    <field name="avatar_128" invisible="1"/>
                    <field name="user_id" invisible="1"/>
                    <field name="image_1920" widget="image" class="oe_avatar" required="1" options="{&quot;preview_image&quot;: &quot;avatar_128&quot;}"  readonly="state in ['print_info', 'register', 'change_request']"/>
                    <div class="oe_title mb24">
                        <field name="is_company" invisible="1"/>
                        <field name="commercial_partner_id" invisible="1"/>
                        <field name="active" invisible="1"/>
                        <field name="company_id" invisible="1"/>
                        <field name="country_code" invisible="1"/>
                        <div class="o_row">
                            <field name="is_welfare" readonly="state in ['print_info', 'register', 'change_request']" />
                            <label for="is_welfare" />
                            <field name="is_student" readonly="state in ['print_info', 'register', 'change_request']" />
                            <label for="is_student" />
                            <field name="is_medical" readonly="state in ['print_info', 'register', 'change_request']" />
                            <label for="is_medical" />
                            <field name="is_employee" readonly="state in ['print_info', 'register', 'change_request']" />
                            <label for="is_employee" />
                            <field name="is_rider" invisible="not is_employee" readonly="state in ['print_info', 'register', 'change_request']" />
                            <label for="is_rider" invisible="not is_employee" />
                            <field name="is_microfinance" readonly="state in ['print_info', 'register', 'change_request']" />
                            <label for="is_microfinance" />
                            <field name="is_change_request" invisible="1" />
                        </div>
                        <h1>
                            <field id="individual"   readonly="state in ['print_info', 'register', 'change_request']" options="{'line_breaks': False}" widget="text" class="text-break" name="name" default_focus="1" placeholder="e.g. Brandom Freeman" invisible="is_company" required="1"/>
                        </h1>
                    </div>
                    <group>
                        <group name="donee_col_1">
                            <field name="is_donee" invisible="1" />
                            <field name="donee_type" readonly="state in ['print_info', 'register', 'change_request'] or is_medical or is_student"  required="not is_medical" />
                            
                            <!-- <field name="welfare_application_type" invisible="not is_welfare" required="is_welfare"   readonly="state in ['print_info', 'register', 'change_request']" />
                            <field name="microfinance_application_type" invisible="not is_microfinance" required="is_microfinance"   readonly="state in ['print_info', 'register', 'change_request']" /> -->
                            w
                            <!-- <div style="display: flex;"><field options="{'no_create': True, 'no_edit': True, 'no_open': True}" style="width: 30% !important;" name="phone_code_id" readonly="state in ['print_info', 'register']" required="donee_type == 'individual'"/> <field style="width: 70% !important;" name="mobile" readonly="state in ['print_info', 'register']" required="donee_type == 'individual'" widget="phone"/></div> -->
                            <field name="cnic" invisible="donee_type == 'institute'" required="donee_type == 'individual'" readonly="state in ['print_info', 'register', 'change_request']" />
                            <field name="cnic_no" invisible="cnic == 'no' or donee_type == 'institute'" required="cnic == 'yes' and donee_type == 'individual'" readonly="state in ['print_info', 'register', 'change_request']" />
                            <field name="cnic_front" invisible="cnic == 'no' or donee_type == 'institute'" required="cnic == 'yes' and donee_type == 'individual'" readonly="state in ['print_info', 'register', 'change_request']" />
                            <field name="cnic_back" invisible="cnic == 'no' or donee_type == 'institute'" required="cnic == 'yes' and donee_type == 'individual'" readonly="state in ['print_info', 'register', 'change_request']" />
                            <field name="head_cnic_no" invisible="cnic == 'yes'" required="cnic == 'no'" readonly="state in ['print_info', 'register', 'change_request']" />
                            <field name="member_cnic_no" invisible="cnic == 'yes'" required="cnic == 'no'" readonly="state in ['print_info', 'register', 'change_request']" />
                        </group>
                        <group name="donee_col_2">
                            <field name="city"  readonly="state in ['print_info', 'register']" required="1" />
                            <field name="branch_id" string="Branch" options="{'no_create': True, 'no_edit': True, 'no_open': True}"  readonly="state in ['print_info', 'register', 'change_request']" required="1" />
                            <field name="reference_remarks"  readonly="state in ['print_info', 'register']" />
                            <field name="reference_letter" invisible="cnic == 'yes'" required="cnic == 'no'" readonly="state in ['print_info', 'register']" />
                            <field name="approved_form" required="is_change_request" readonly="not is_change_request" />
                            <field name="donor_id" options="{'no_create': True, 'no_edit': True, 'no_open': True}" readonly="1" invisible="1" />
                            <field name="donor_registration_id" readonly="1" />
                            <field name="old_system_record" string="Old System ID" />
                        </group>
                    </group>
                    <notebook>
                        <page name="personal_info" string="Personal Information">
                            <group>
                                <group name="personal_info_col_1">
                                    <field name="surname_name"  readonly="state in ['print_info', 'register', 'change_request']" />
                                    <field name="gender" readonly="state in ['print_info', 'register', 'change_request']" required="not is_medical and donee_type == 'individual'" />
                                    <field name="date_of_birth"  readonly="state in ['print_info', 'register', 'change_request']" required="not is_medical and donee_type == 'individual'" />
                                    <field name="age" />
                                    <field name="religion_category"   readonly="state in ['print_info', 'register', 'change_request']" required="not is_medical" />
                                    <field name="next_kin"  readonly="state in ['print_info', 'register']" required="not is_medical and donee_type == 'individual'" />
                                    <field name="street" string="Address"  readonly="state in ['print_info', 'register']" required="donee_type == 'individual'" />
                                    <field name="nearest_land_mark"  readonly="state in ['print_info', 'register']" required="not is_medical and donee_type == 'individual'" />
                                </group>
                                <group name="personal_info_col_2">
                                    <field name="father_name"  readonly="state in ['print_info', 'register']" required="donee_type == 'individual'" />
                                    <field name="martial_status"  readonly="state in ['print_info', 'register']" />
                                    <field name="spouse_name" invisible="martial_status == 'unmarried'" required="martial_status == 'married'"  readonly="state in ['print_info', 'register']" />
                                    <field name="bank_wallet_account"  readonly="state in ['print_info', 'register', 'change_request']" />
                                    <field name="detail"  readonly="state in ['print_info', 'register', 'change_request']" />
                                </group>
                            </group>
                        </page>
                        <page name="institute_info" string="Intitute Information" invisible="donee_type != 'institute'">
                            <group>    
                                <group name="institute_info_col_1">
                                    <field name="reg_no"  readonly="state in ['print_info', 'register', 'change_request']" required="donee_type == 'institute'" />
                                    <field name="date_of_incorporation"  readonly="state in ['print_info', 'register', 'change_request']" required="donee_type == 'institute'" />
                                    <field name="institution_referred_by"  readonly="state in ['print_info', 'register', 'change_request']" required="donee_type == 'institute'" />
                                    <field name="authorized_person_name"  readonly="state in ['print_info', 'register', 'change_request']" required="donee_type == 'institute'" />
                                </group>
                                <group name="institute_info_col_1">
                                    <field name="authorized_person_cell"  readonly="state in ['print_info', 'register', 'change_request']" required="donee_type == 'institute'" />
                                    <field name="authorized_person_cnic"  readonly="state in ['print_info', 'register', 'change_request']" required="donee_type == 'institute'" />
                                    <field name="contact_person_name"  readonly="state in ['print_info', 'register', 'change_request']" required="donee_type == 'institute'" />
                                </group>
                            </group>
                        </page>
                        <page name="welfare_details" string="Welfare Details" invisible="not is_welfare">

                        </page>
                        <page name="student_details" string="Student Details" invisible="not is_student">
                            <group>
                                <group name="student_details_col_1">
                                    <field name="father_cnic_no" readonly="1" required="is_student" />
                                </group>
                                <group name="student_details_col_1">
                                    <field name="course_ids" string="Courses" domain="[('is_course', '=', True)]" readonly="1" required="is_student" widget="many2many_tags" />
                                </group>
                            </group>
                            <notebook>
                                <page name="qualification" string="Qualification Details">
                                    <field name="student_qualification_ids" readonly="1">
                                        <tree string="Student Qualification" editable="bottom">
                                            <field name="examination" />
                                            <field name="school_uni_center" />
                                            <field name="board" />
                                            <field name="percentage" />
                                            <field name="year" />
                                        </tree>
                                    </field>
                                </page>
                                <page name="fee_voucher" string="Fee Vouchers">
                                </page>
                            </notebook>
                        </page>
                        <page name="medical_details" string="Medical Details" invisible="not is_medical">
                            <notebook>
                                <page name="medicine" string="Medicine">
                                    
                                </page>
                                <page name="equipment" string="Equipment">
                                    
                                </page>
                            </notebook>
                        </page>
                        <page name="microfinance" string="Microfinance Details" invisible="not is_microfinance">

                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user"/>
                    <field name="activity_ids"/>
                    <field name="message_ids" options="{'post_refresh': 'always'}"/>
                </div>
            </form>
        </field>
    </record>


    <!-- Donor -->
    <record id="custom_donor_res_partner_view_tree" model="ir.ui.view">
        <field name="name">custom.res.partner.view.tree</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <tree>
                <field name="barcode" string="Registration ID" />
                <field name="complete_name" />
                <field name="gender" />
                <field name="martial_status" />
                <field name="street" string="Address" />
                <field name="mobile" widget="phone" />
                <field name="cnic_no" />
                <field name="date_of_birth" />
                <field name="age" />
                <field name="city" />
                <field name="branch_id" string="Branch" />
                <field name="donee_id" column_invisible="1" />
                <field name="donee_registration_id" />
                <field name="old_system_record" string="Old System ID" />
                <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-warning="state == 'validate'" decoration-success="state == 'register'" decoration-danger="state == 'reject'" />
            </tree>
        </field>
    </record>
    
    <record id="custom_donor_res_partner_view_form" model="ir.ui.view">
        <field name="name">custom.donee.res.partner.view.form</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button string="Reset to Draft" name="action_draft" type="object" invisible="state in ['draft', 'under_review']" />
                    <button string="Validate Data" name="action_validate" type="object" class="oe_highlight" invisible="state in ['validate', 'register', 'reject']" />
                    <button string="Register" name="action_register" type="object" class="oe_highlight" invisible="state in ['draft', 'register', 'reject', 'change_request']" />
                    <button string="Change Request" name="action_change_request" type="object" invisible="state in ['draft', 'register', 'reject', 'change_request']" />

                    <field name="state" widget="statusbar" statusbar_visible="draft, validate, register"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box"/>
                    <widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>
                    <field name="avatar_128" invisible="1"/>
                    <field name="user_id" invisible="1"/>
                    <field name="image_1920" widget="image" class="oe_avatar" options="{&quot;preview_image&quot;: &quot;avatar_128&quot;}"/>
                    <div class="oe_title mb24">
                        <field name="is_company" invisible="1"/>
                        <field name="commercial_partner_id" invisible="1"/>
                        <field name="active" invisible="1"/>
                        <field name="company_id" invisible="1"/>
                        <field name="country_code" invisible="1"/>
                        <h1>
                            <field id="individual" options="{'line_breaks': False}" widget="text" class="text-break" name="name" default_focus="1" placeholder="e.g. Brandom Freeman" invisible="is_company" required="1"/>
                        </h1>
                    </div>
                    <group>
                        <group name="donor_col_1">
                            <field name="is_donee" invisible="1" />
                            <label for="mobile"/>
                            <div style="display: flex;"><field options="{'no_create': True, 'no_edit': True, 'no_open': True}" style="width: 30% !important;" name="phone_code_id" readonly="state in ['print_info', 'register']" required="1" /> <field style="width: 70% !important;" name="mobile" readonly="state in ['print_info', 'register']" required="1" /></div>
                            <!-- <div style="display: flex;"><field options="{'no_create': True, 'no_edit': True, 'no_open': True}" style="width: 30% !important;" name="phone_code_id" readonly="state in ['print_info', 'register']" required="1" /> <field style="width: 70% !important;" name="mobile" readonly="state in ['print_info', 'register']" required="1" widget="phone"  /></div> -->
                            <field name="cnic" />
                            <field name="cnic_no" invisible="cnic == 'no'" />
                            <field name="head_cnic_no" invisible="cnic == 'yes'" />
                            <field name="member_cnic_no" invisible="cnic == 'yes'" />
                            <field name="vat" />
                        </group>
                        <group name="donor_col_2">
                            <field name="city"  readonly="state in ['print_info', 'register']" />
                            <field name="branch_id" string="Branch" options="{'no_create': True, 'no_edit': True, 'no_open': True}"  readonly="state in ['print_info', 'register']" required="1" />
                            <field name="donee_id" options="{'no_create': True, 'no_edit': True, 'no_open': True}" readonly="1" invisible="1" />
                            <field name="donee_registration_id" readonly="1" />
                            <field name="old_system_record" string="Old System ID" />
                        </group>
                    </group>
                    <notebook>
                        <page name="personal_info" string="Personal Information">
                            <group>
                                <group name="personal_info_col_1">
                                    <field name="surname_name"  readonly="state in ['print_info', 'register', 'change_request']" />
                                    <field name="gender"  readonly="state in ['print_info', 'register', 'change_request']" />
                                    <field name="date_of_birth"  readonly="state in ['print_info', 'register', 'change_request']" />
                                    <field name="age" />
                                    <field name="religion_category"  readonly="state in ['print_info', 'register', 'change_request']" />
                                    <field name="next_kin"  readonly="state in ['print_info', 'register']" />
                                    <field name="street" string="Address"  readonly="state in ['print_info', 'register']" />
                                    <field name="nearest_land_mark"  readonly="state in ['print_info', 'register']" />
                                </group>
                                <group name="personal_info_col_2">
                                    <field name="father_name"  readonly="state in ['print_info', 'register']" />
                                    <field name="martial_status"  readonly="state in ['print_info', 'register']" />
                                    <field name="spouse_name" invisible="martial_status == 'unmarried'" required="martial_status == 'married'"  readonly="state in ['print_info', 'register']" />
                                    <field name="bank_wallet_account"  readonly="state in ['print_info', 'register', 'change_request']" />
                                    <field name="detail"  readonly="state in ['print_info', 'register', 'change_request']" />
                                </group>
                            </group>
                        </page>
                        <page name="donation_box" string="Donation Box">
                    
                        </page>
                        <page name="pos_donation" string="POS Donations">
                            
                        </page>
                        <page name="donation" string="Online Donations">
                            
                        </page>
                        <page name="donation_by_home" string="Donation by Home">
                            
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user"/>
                    <field name="activity_ids"/>
                    <field name="message_ids" options="{'post_refresh': 'always'}"/>
                </div>
            </form>
        </field>
    </record>
</odoo>
