<odoo>

    <record id="view_expense_report_reimburse_wizard" model="ir.ui.view">
        <field name="name">expense_report.expense_report.form</field>
        <field name="model">expense_report.expense_report</field>
        <field name="arch" type="xml">
            <form string="Expense Report">

                <footer>
                    <!--                    <button string="Generate PDF" type="object" name="generate_excel_report" class="btn-primary"/>-->
                    <button string="Generate PDF Report" type="object" name="action_print_report" class="btn-primary"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    <!-- QWeb Template -->
    <template id="expense_report_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">

                    <h1>User: <t t-esc="user.name"/></h1>
                    <h2>To be Reimbursed Expense Report</h2>
                    <table class="table table-sm table-bordered">
                        <thead>
                            <tr>
                                <th>S. No</th>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Employee</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="counter" t-value="0"/>
                            <t t-set="total_sum" t-value="0"/>
                            <t t-foreach="t" t-as="line">
                                <tr style="text-align: center;">
                                    <td>
                                        <t t-set="counter" t-value="counter + 1"/>
                                        <t t-esc="counter"/>
                                    </td>
                                    <td>
                                        <t t-esc="line['date']"/>
                                    </td>
                                    <td>
                                        <t t-esc="line['name']"/>
                                    </td>
                                    <td>
                                        <t t-esc="line['employee_id']"/>
                                    </td>
                                    <td>
                                        <t t-esc="line['total_amount']"/>
                                        <t t-set="total_sum" t-value="total_sum + line['total_amount']"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                        <t t-if="total_sum">
                            <tfoot>
                                <tr style="font-weight: bold; text-align: center;">
                                    <td colspan="4">Total</td>
                                    <td>
                                        <t t-esc="total_sum" t-options='{"widget": "float", "precision": 2}'/>
                                    </td>
                                </tr>
                            </tfoot>
                        </t>
                    </table>
                </div>
            </t>
        </t>
    </template>

    <!-- Report Action -->
    <!--    <report-->
    <!--            id="expense_report_pdf"-->
    <!--            string="Approved Expense Report"-->
    <!--            model="expense_report.expense_report"-->
    <!--            report_type="qweb-pdf"-->
    <!--            name="expense_report.expense_report_template"-->
    <!--            file="expense_report.expense_report_template"-->
    <!--            print_report_name="'Expense_Report_' + object.create_date.strftime('%Y-%m-%d')"-->
    <!--    />-->

    <record id="action_expense_report_wizard" model="ir.actions.act_window">
        <field name="name">Expense Report</field>
        <field name="res_model">expense_report.expense_report</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

    <record id="expense_report_pdf" model="ir.actions.report">
        <field name="name">Expense Report</field>
        <field name="model">expense_report.expense_report</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">expense_report.expense_report_template</field>
        <field name="report_file">expense_report.expense_report_template</field>
    </record>


    <menuitem
            id="menu_expense_approved_report"
            name="To be Reimbursed Expense Report"
            parent="hr_expense.menu_hr_expense_root"
            action="action_expense_report_wizard"
            sequence="50"
    />
</odoo>
